server {
    listen 80;
    server_name ncctracker.top www.ncctracker.top;

    root /opt/stfc;
    index index.html;

    # Dashboard pages (allows /player instead of /player.html)
    location / {
        try_files $uri $uri.html $uri/ =404;
    }

    # JSON data files
    location /data/ {
        alias /opt/stfc/data/;
        add_header Cache-Control "no-cache";
        add_header Access-Control-Allow-Origin "*";
    }

    # Block access to sensitive files
    location ~ /\. {
        deny all;
    }
    location ~ \.(py|sh|bat|db|log|pem)$ {
        deny all;
    }
    location /browser_session/ {
        deny all;
    }
    location /deploy/ {
        deny all;
    }
    location /venv/ {
        deny all;
    }
}
